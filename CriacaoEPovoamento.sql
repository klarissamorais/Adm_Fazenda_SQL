-------------------
-- CRIAÇÃO DO BD --
-------------------


--CRIA TABELA TURISTA
CREATE TABLE TURISTA (
NUM_CADASTRO VARCHAR(10),
NOME VARCHAR(20), 
CONSTRAINT PK_TURISTA PRIMARY KEY (NUM_CADASTRO)
);


--CRIA TABELA PACOTE PROMOCIONAL
CREATE TABLE PACOTE_PROMOCIONAL (
COD_PROMOCIONAL VARCHAR(10),
CONSTRAINT PK_PACOTE_PROMOCIONAL PRIMARY KEY (COD_PROMOCIONAL)
);


--CRIA TABELA PROPRIETARIO
CREATE TABLE PROPRIETARIO (
CPF VARCHAR(11),
NOME VARCHAR(20), 
CONSTRAINT PK_PROPRIETARIO PRIMARY KEY (CPF)
);


--CRIA TABELA FAZENDA 
CREATE TABLE FAZENDA (
COD_PROPRIEDADE VARCHAR(10),
END_LOTE VARCHAR(20),
END_NUMERO VARCHAR(5),
CPF VARCHAR(11) NOT NULL,
CONSTRAINT CPF_FAZENDA_FK FOREIGN KEY (CPF) REFERENCES PROPRIETARIO ON DELETE CASCADE,
CONSTRAINT FAZENDA_PK PRIMARY KEY (COD_PROPRIEDADE)   
);


--CRIA TABELA FUNCIONARIO
CREATE TABLE FUNCIONARIO(
ID VARCHAR(3),
NOME VARCHAR(20), 
COD_PROPRIEDADE VARCHAR(10) NOT NULL,
ID_GERENTE VARCHAR(3),
DATA_ADMISSAO DATE,
CONSTRAINT FUNCIONARIO_PK PRIMARY KEY (ID),
CONSTRAINT FUNCIONARIO_COD_FK FOREIGN KEY (COD_PROPRIEDADE) REFERENCES FAZENDA ON DELETE CASCADE,
CONSTRAINT FUNCIONARIO_GERENTE_FK FOREIGN KEY (ID_GERENTE) REFERENCES FUNCIONARIO 
);


--CRIA TABELA SETOR
CREATE TABLE SETOR(
ID_ART NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
NOME VARCHAR(10),
RECURSO NUMBER(10,2),
RESPONSAVEL VARCHAR(3) NOT NULL UNIQUE, 
CONSTRAINT CHK_RECURSO CHECK (RECURSO >= 0 ),
CONSTRAINT RESPONSAVEL_ID_FK FOREIGN KEY (RESPONSAVEL) REFERENCES FUNCIONARIO ON DELETE CASCADE
);


--CRIA TABELA TRABALHA
CREATE TABLE TRABALHA(
ID_ART,
ID VARCHAR(3),
CONSTRAINT TRABALHA_PK PRIMARY KEY (ID_ART, ID),
CONSTRAINT TRABALHA_COD__FK FOREIGN KEY (ID_ART) REFERENCES SETOR ON DELETE CASCADE,
CONSTRAINT TRABALHA_ID__FK FOREIGN KEY (ID) REFERENCES FUNCIONARIO ON DELETE CASCADE
);


--CRIA TABELA FIXO
CREATE TABLE FIXO(
ID VARCHAR(3),
CONSTRAINT FIXO_PK PRIMARY KEY (ID),
CONSTRAINT FIXO_FK FOREIGN KEY (ID) REFERENCES FUNCIONARIO ON DELETE CASCADE
);


--CRIA TABELA TEMPORARIO
CREATE TABLE TEMPORARIO(
ID VARCHAR(3),
TEMPO_CONTRATO NUMBER(4),
CONSTRAINT TEMPORARIO_PK PRIMARY KEY (ID),
CONSTRAINT TEMPORARIO_FK FOREIGN KEY (ID) REFERENCES FUNCIONARIO ON DELETE CASCADE   
);


-- CRIA TABELA ANIMAL
CREATE TABLE ANIMAL ( 
CODIGO VARCHAR(20), 
NOME VARCHAR(20), 
ESPECIE VARCHAR(30),
SEXO CHAR(1), 
DATA_NASC DATE, 
CUIDADOR VARCHAR(3) NOT NULL,
CONSTRAINT PK_ANIMAL PRIMARY KEY (CODIGO),
CONSTRAINT CUIDADOR_ID_FK FOREIGN KEY (CUIDADOR) REFERENCES FUNCIONARIO ON DELETE CASCADE, 
CONSTRAINT AK_ANIMAL UNIQUE (NOME, DATA_NASC) 
);


--CRIA TABELA ALIMENTACAO 
CREATE TABLE ALIMENTACAO (
CODIGO VARCHAR(20),
ALIMENTACAO VARCHAR(20),
CONSTRAINT PK_ALIMENTACAO PRIMARY KEY (CODIGO, ALIMENTACAO),
CONSTRAINT ALIMENTACAO_ANIMAL_FK FOREIGN KEY (CODIGO) REFERENCES ANIMAL ON DELETE CASCADE
);


--CRIA TABELA EQUIPAMENTOS     
CREATE TABLE EQUIPAMENTOS(
CODIGO VARCHAR(20),
NUMERO VARCHAR(3),
CONSTRAINT EQUIPAMENTOS_PK PRIMARY KEY (CODIGO, NUMERO),
CONSTRAINT EQUIPAMENTOS_FK FOREIGN KEY (CODIGO) REFERENCES ANIMAL ON DELETE CASCADE
);
 
--CRIA TABELA HOSPEDA
CREATE TABLE HOSPEDA(
NUM_CADASTRO VARCHAR(3),
COD_PROPRIEDADE VARCHAR(10),
DATA_VISIT DATE,
CONSTRAINT HOSPEDA_PK PRIMARY KEY (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT),
CONSTRAINT HOSPEDA_NUM_FK FOREIGN KEY (NUM_CADASTRO) REFERENCES TURISTA ON DELETE CASCADE,
CONSTRAINT HOSPEDA_COD_FK FOREIGN KEY (COD_PROPRIEDADE) REFERENCES FAZENDA ON DELETE CASCADE    
);


--CRIA TABELA APRESENTA
CREATE TABLE APRESENTA(
NUM_CADASTRO VARCHAR(3),
CODIGO VARCHAR(20),
ID VARCHAR(3),
CONSTRAINT APRESENTA_PK PRIMARY KEY (NUM_CADASTRO, CODIGO, ID),
CONSTRAINT APRESENTA_NUM_FK FOREIGN KEY (NUM_CADASTRO) REFERENCES TURISTA ON DELETE CASCADE,
CONSTRAINT APRESENTA_COD_FK FOREIGN KEY (CODIGO) REFERENCES ANIMAL ON DELETE CASCADE,
CONSTRAINT APRESENTA_ID_FK FOREIGN KEY (ID) REFERENCES TEMPORARIO ON DELETE CASCADE    
);


--CRIA TABELA INVESTE
CREATE TABLE INVESTE(
CPF VARCHAR(11),
COD_PROPRIEDADE VARCHAR(10),
CONSTRAINT INVESTE_PK PRIMARY KEY (COD_PROPRIEDADE, CPF),
CONSTRAINT INVESTE_CPF_FK FOREIGN KEY (CPF) REFERENCES PROPRIETARIO ON DELETE CASCADE,
CONSTRAINT INVESTE_COD_FK FOREIGN KEY (COD_PROPRIEDADE) REFERENCES FAZENDA ON DELETE CASCADE    
);




--CRIA TABELA COMPRA
CREATE TABLE COMPRA( 
COD_PROMOCIONAL VARCHAR(10), 
NUM_CADASTRO VARCHAR(3), 
COD_PROPRIEDADE VARCHAR(10), 
DATA_VISIT DATE, 
CONSTRAINT COMPRA_PK PRIMARY KEY (NUM_CADASTRO, COD_PROMOCIONAL, COD_PROPRIEDADE, DATA_VISIT), 
CONSTRAINT COMPRA_NUM_FK FOREIGN KEY (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) REFERENCES HOSPEDA(NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) ON DELETE CASCADE, 
CONSTRAINT COMPRA_COD_PROMOCIONAL_FK FOREIGN KEY (COD_PROMOCIONAL) REFERENCES PACOTE_PROMOCIONAL(COD_PROMOCIONAL) ON DELETE CASCADE 
);


----------------------
-- POVOAMENTO DO BD --
---------------------


-- INSERE DADOS NA TABELA TURISTA
INSERT INTO TURISTA (NUM_CADASTRO, NOME) VALUES ('001', 'Messi');
INSERT INTO TURISTA (NUM_CADASTRO, NOME) VALUES ('002', 'Bruna');
INSERT INTO TURISTA (NUM_CADASTRO, NOME) VALUES ('003', 'Angelina');


-- INSERE DADOS NA TABELA PACOTE PROMOCIONAL
INSERT INTO PACOTE_PROMOCIONAL (COD_PROMOCIONAL) VALUES ('PROMO123');
INSERT INTO PACOTE_PROMOCIONAL (COD_PROMOCIONAL) VALUES ('PROMO456');
INSERT INTO PACOTE_PROMOCIONAL (COD_PROMOCIONAL) VALUES ('PROMO789');


-- INSERE DADOS NA TABELA PROPRIETARIOS
INSERT INTO PROPRIETARIO (CPF, NOME) VALUES  ('12345678901', 'Belfort');
INSERT INTO PROPRIETARIO (CPF, NOME) VALUES  ('23456789012', 'Cataleya');
INSERT INTO PROPRIETARIO (CPF, NOME) VALUES  ('34567890123', 'Wick');
INSERT INTO PROPRIETARIO (CPF, NOME) VALUES  ('45678901234', 'Cruise');


-- INSERE DADOS NA TABELA FAZENDA
INSERT INTO FAZENDA (COD_PROPRIEDADE, END_LOTE, END_NUMERO, CPF) VALUES ('FZ001', 'Rua A', '10', '12345678901');
INSERT INTO FAZENDA (COD_PROPRIEDADE, END_LOTE, END_NUMERO, CPF) VALUES ('FZ002', 'Rua B', '20', '23456789012');
INSERT INTO FAZENDA (COD_PROPRIEDADE, END_LOTE, END_NUMERO, CPF) VALUES ('FZ003', 'Rua C', '30', '45678901234');
INSERT INTO FAZENDA (COD_PROPRIEDADE, END_LOTE, END_NUMERO, CPF) VALUES ('FZ004', 'Rua D', '40', '45678901234');


-- INSERE DADOS NA TABELA FUNCIONARIO
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F01', 'Darwin', 'FZ001', NULL, TO_DATE('01/01/2022', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F02', 'Átila', 'FZ001', 'F01', TO_DATE('03/12/2019', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F03', 'Scamander', 'FZ002', NULL, TO_DATE('15/01/2022', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F04', 'Buyer', 'FZ002', 'F03', TO_DATE('30/04/2020', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F05', 'Kal-El', 'FZ002', 'F03', TO_DATE('24/06/2021', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F06', 'Thanos', 'FZ002',  NULL, TO_DATE('09/09/2019', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F07', 'Rei do Gado', 'FZ004',  NULL, TO_DATE('02/10/2019', 'DD/MM/YYYY'));
INSERT INTO FUNCIONARIO (ID, NOME, COD_PROPRIEDADE, ID_GERENTE, DATA_ADMISSAO) VALUES ('F08', 'José', 'FZ004',  NULL, TO_DATE('12/12/2019', 'DD/MM/YYYY'));


-- INSERE DADOS NA TABELA SETOR
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('Pecuária', 5000.00, 'F01');
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('Plantio', 7500.00, 'F02');
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('Marketing', 4000.00, 'F04');
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('Armazém', 9000.00, 'F05');
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('RH', 6000.00, 'F06');
INSERT INTO SETOR (NOME, RECURSO, RESPONSAVEL) VALUES ('Financeiro', 8000.00, 'F08');


-- INSERE DADOS NA TABELA TRABALHA
INSERT INTO TRABALHA (ID_ART, ID) VALUES (1, 'F01');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (2, 'F02');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (2, 'F03');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (3, 'F04');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (4, 'F05');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (5, 'F06');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (6, 'F07');
INSERT INTO TRABALHA (ID_ART, ID) VALUES (6, 'F08');


-- INSERE DADOS NA TABELA ANIMAL
INSERT INTO ANIMAL (CODIGO, NOME, ESPECIE, SEXO, DATA_NASC, CUIDADOR) VALUES ('A001', 'Otis', 'Vaca', 'M', TO_DATE('01/01/2018', 'DD/MM/YYYY'), 'F01');
INSERT INTO ANIMAL (CODIGO, NOME, ESPECIE, SEXO, DATA_NASC, CUIDADOR) VALUES ('A002', 'Spirit', 'Cavalo', 'M', TO_DATE('03/05/2019', 'DD/MM/YYYY'), 'F01');
INSERT INTO ANIMAL (CODIGO, NOME, ESPECIE, SEXO, DATA_NASC, CUIDADOR) VALUES ('A003', 'Maggie', 'Vaca', 'F', TO_DATE('10/09/2017', 'DD/MM/YYYY'), 'F03');
INSERT INTO ANIMAL (CODIGO, NOME, ESPECIE, SEXO, DATA_NASC, CUIDADOR) VALUES ('A004', 'Rapicó', 'Porco', 'M', TO_DATE('05/06/2020', 'DD/MM/YYYY'), 'F05');
INSERT INTO ANIMAL (CODIGO, NOME, ESPECIE, SEXO, DATA_NASC, CUIDADOR) VALUES ('A005', 'Bullseye', 'Cavalo', 'M', TO_DATE('12/12/2016', 'DD/MM/YYYY'), 'F07');


-- INSERE DADOS NA TABELA ALIMENTACAO
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A001', 'Ração para vacas');
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A002', 'Ração para cavalos');
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A002', 'Cenouras');
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A003', 'Ração para vacas');
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A004', 'Biscoito para porco');
INSERT INTO ALIMENTACAO (CODIGO, ALIMENTACAO) VALUES ('A005', 'Ração para cavalos');


-- INSERE DADOS NA TABELA EQUIPAMENTOS
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A001', '001');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A001', '002');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A002', '001');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A003', '001');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A004', '001');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A004', '002');
INSERT INTO EQUIPAMENTOS (CODIGO, NUMERO) VALUES ('A005', '001');


-- INSERE DADOS NA TABELA FIXO
INSERT INTO FIXO (ID) VALUES ('F04');
INSERT INTO FIXO (ID) VALUES ('F05');
INSERT INTO FIXO (ID) VALUES ('F06');
INSERT INTO FIXO (ID) VALUES ('F08');


-- INSERE DADOS NA TABELA TEMPORARIO
INSERT INTO TEMPORARIO (ID, TEMPO_CONTRATO) VALUES ('F01', 12);
INSERT INTO TEMPORARIO (ID, TEMPO_CONTRATO) VALUES ('F02', 6);
INSERT INTO TEMPORARIO (ID, TEMPO_CONTRATO) VALUES ('F03', 24);
INSERT INTO TEMPORARIO (ID, TEMPO_CONTRATO) VALUES ('F07', 18);


-- INSERE DADOS NA TABELA HOSPEDA
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('001', 'FZ001', TO_DATE('10/01/2022', 'DD/MM/YYYY'));
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('002', 'FZ001', TO_DATE('15/02/2022', 'DD/MM/YYYY'));
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('003', 'FZ002', TO_DATE('05/03/2022', 'DD/MM/YYYY'));
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('001', 'FZ004', TO_DATE('20/04/2022', 'DD/MM/YYYY'));
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('003', 'FZ004', TO_DATE('30/05/2022', 'DD/MM/YYYY'));
INSERT INTO HOSPEDA (NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('002', 'FZ003', TO_DATE('05/06/2022', 'DD/MM/YYYY'));


-- INSERE DADOS NA TABELA APRESENTA
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('001', 'A001', 'F02');
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('001', 'A002', 'F02');
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('001', 'A005', 'F07');
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('002', 'A001', 'F01');
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('003', 'A001', 'F02');
INSERT INTO APRESENTA(NUM_CADASTRO, CODIGO, ID) VALUES ('003', 'A003', 'F03');


-- INSERE DADOS NA TABELA INVESTE
INSERT INTO INVESTE (CPF, COD_PROPRIEDADE) VALUES ('12345678901', 'FZ001');
INSERT INTO INVESTE (CPF, COD_PROPRIEDADE) VALUES ('23456789012', 'FZ002');
INSERT INTO INVESTE (CPF, COD_PROPRIEDADE) VALUES ('34567890123', 'FZ002');
INSERT INTO INVESTE (CPF, COD_PROPRIEDADE) VALUES ('45678901234', 'FZ004');
INSERT INTO INVESTE (CPF, COD_PROPRIEDADE) VALUES ('45678901234', 'FZ003');


-- INSERE DADOS NA TABELA COMPRA
INSERT INTO COMPRA (COD_PROMOCIONAL, NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('PROMO123', '001', 'FZ001', TO_DATE('10/01/2022', 'DD/MM/YYYY'));
INSERT INTO COMPRA (COD_PROMOCIONAL, NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('PROMO123', '002', 'FZ001', TO_DATE('15/02/2022', 'DD/MM/YYYY'));
INSERT INTO COMPRA (COD_PROMOCIONAL, NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('PROMO456', '003', 'FZ002', TO_DATE('05/03/2022', 'DD/MM/YYYY'));
INSERT INTO COMPRA (COD_PROMOCIONAL, NUM_CADASTRO, COD_PROPRIEDADE, DATA_VISIT) VALUES ('PROMO789', '002', 'FZ003', TO_DATE('05/06/2022', 'DD/MM/YYYY'));